{"ast":null,"code":"import _slicedToArray from\"/Users/a582616/Desktop/Web Development/Project/Instagram/instagram-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Post.css';import Avatar from\"@material-ui/core/Avatar\";import{db}from'./firebase';import firebase from'firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){var postId=_ref.postId,user=_ref.user,username=_ref.username,caption=_ref.caption,imageUrl=_ref.imageUrl;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){var unsubscribe;if(postId){unsubscribe=db.collection(\"posts\").doc(postId).collection(\"comments\").orderBy('timestamp','desc').onSnapshot(function(snapshot){setComments(snapshot.docs.map(function(doc){return doc.data();}));});}return function(){unsubscribe();};},[postId]);var postComment=function postComment(event){event.preventDefault();db.collection(\"posts\").doc(postId).collection(\"comments\").add({text:comment,username:user.displayName,timestamp:firebase.firestore.FieldValue.serverTimestamp()});setComment('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post__header\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"post__avatar\",alt:username,src:\"/static/images/avatar/1.jpg\"}),/*#__PURE__*/_jsx(\"h3\",{children:username})]}),/*#__PURE__*/_jsx(\"img\",{className:\"post__image\",src:imageUrl,alt:\"\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"post__text\",children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:username}),\" \",caption]}),/*#__PURE__*/_jsx(\"div\",{className:\"post__comments\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:comment.username}),\" \",comment.text]});})}),user&&/*#__PURE__*/_jsxs(\"form\",{className:\"post__commentBox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"post__input\",type:\"text\",placeholder:\"Add a comment...\",value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"post__button\",disabled:!comment,type:\"submit\",onClick:postComment,children:\"Post\"})]})]});}export default Post;","map":{"version":3,"sources":["/Users/a582616/Desktop/Web Development/Project/Instagram/instagram-clone/src/Post.js"],"names":["React","useState","useEffect","Avatar","db","firebase","Post","postId","user","username","caption","imageUrl","comments","setComments","comment","setComment","unsubscribe","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","postComment","event","preventDefault","add","text","displayName","timestamp","firestore","FieldValue","serverTimestamp","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './Post.css';\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { db } from './firebase';\nimport firebase from 'firebase';\n\nfunction Post({ postId, user, username, caption, imageUrl }) {\n  const [comments, setComments] = useState([]);\n  const [comment, setComment] = useState('');\n\n  useEffect(() => {\n    let unsubscribe;\n    if (postId) {\n      unsubscribe = db\n        .collection(\"posts\")\n        .doc(postId)\n        .collection(\"comments\")\n        .orderBy('timestamp', 'desc')\n        .onSnapshot((snapshot) => {\n          setComments(snapshot.docs.map((doc) => doc.data()));\n        });\n    }\n\n    return () => {\n      unsubscribe();\n    };\n  }, [postId]);\n\n  const postComment = (event) => {\n    event.preventDefault();\n    db.collection(\"posts\").doc(postId).collection(\"comments\").add({\n      text: comment,\n      username: user.displayName,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n\n    setComment('');\n  };\n\n  return (\n    <div className=\"post\">\n      <div className=\"post__header\">\n        <Avatar\n          className=\"post__avatar\"\n          alt={username}\n          src=\"/static/images/avatar/1.jpg\"\n        />\n        <h3>{username}</h3>\n      </div>\n\n      <img className=\"post__image\"\n      src={imageUrl}\n      alt=\"\"\n      />\n\n      <h4 className=\"post__text\"> <strong>{username}</strong> {caption}</h4>\n      <div className=\"post__comments\">\n\n      {\n        comments.map((comment) => (\n          <p>\n            <strong>{comment.username}</strong> {comment.text}\n          </p>\n        ))\n      }\n      </div>\n      {\n        user && (\n          <form className=\"post__commentBox\">\n            <input\n              className=\"post__input\"\n              type=\"text\"\n              placeholder=\"Add a comment...\"\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n            />\n            <button\n              className=\"post__button\"\n              disabled={!comment}\n              type=\"submit\"\n              onClick={postComment}\n            >\n              Post\n            </button>\n          </form>\n        )\n      }\n\n\n    </div>\n  )\n}\n\nexport default Post\n"]},"metadata":{},"sourceType":"module"}